<!DOCTYPE html>
<html lang="es">

<head>
    <title>LISTA DE TAREAS</title>
    <link rel="Manifest" href="Manifest.json">
    <meta name="theme-color" content="#4CAF50">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
    <div class="container text-center"
     style="background-image: 'C:\Users\tazma\Downloads\fondohtml.jpg' ">
        
        <div class="container text-center">
            <div class="row">
                <div class="col">
                    LISTA DE TAREAS
                </div>
                <div class="col">
                    <label for="captura" class="form-label me-2">Ingresa tarea:</label>
                    <div class="d-flex align-items-center my-2">
                        <input type="text" class="form-control mx-2" id="captura" placeholder="Tarea...">
                        <button type="button" class="btn btn-success d-flex" onclick="agregarFila()">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-square-dotted" viewBox="0 0 16 16">
                                <path d="M2.5 0q-.25 0-.487.048l.194.98A1.5 1.5 0 0 1 2.5 1h.458V0zm2.292 0h-.917v1h.917zm1.833 0h-.917v1h.917zm1.833 0h-.916v1h.916zm1.834 0h-.917v1h.917zm1.833 0h-.917v1h.917zM13.5 0h-.458v1h.458q.151 0 .293.029l.194-.981A2.5 2.5 0 0 0 13.5 0m2.079 1.11a2.5 2.5 0 0 0-.69-.689l-.556.831q.248.167.415.415l.83-.556zM1.11.421a2.5 2.5 0 0 0-.689.69l.831.556c.11-.164.251-.305.415-.415zM16 2.5q0-.25-.048-.487l-.98.194q.027.141.028.293v.458h1zM.048 2.013A2.5 2.5 0 0 0 0 2.5v.458h1V2.5q0-.151.029-.293zM0 3.875v.917h1v-.917zm16 .917v-.917h-1v.917zM0 5.708v.917h1v-.917zm16 .917v-.917h-1v.917zM0 7.542v.916h1v-.916zm15 .916h1v-.916h-1zM0 9.375v.917h1v-.917zm16 .917v-.917h-1v.917zm-16 .916v.917h1v-.917zm16 .917v-.917h-1v.917zm-16 .917v.458q0 .25.048.487l.98-.194A1.5 1.5 0 0 1 1 13.5v-.458zm16 .458v-.458h-1v.458q0 .151-.029.293l.981.194Q16 13.75 16 13.5M.421 14.89c.183.272.417.506.69.689l.556-.831a1.5 1.5 0 0 1-.415-.415zm14.469.689c.272-.183.506-.417.689-.69l-.831-.556c-.11.164-.251.305-.415.415l.556.83zm-12.877.373Q2.25 16 2.5 16h.458v-1H2.5q-.151 0-.293-.029zM13.5 16q.25 0 .487-.048l-.194-.98A1.5 1.5 0 0 1 13.5 15h-.458v1zm-9.625 0h.917v-1h-.917zm1.833 0h.917v-1h-.917zm1.834-1v1h.916v-1zm1.833 1h.917v-1h-.917zm1.833 0h.917v-1h-.917zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z"/>
                              </svg>
                          <span class="mx-2">Agregar</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <center>
            <table id="tabla" class="table table-striped">
                <thead>
                    <tr>
                        <th scope="col">No.</td>
                        <th>Nombre</td>
                        <th>Acción</td>
                    </tr>
                </thead>
                <tbody>
                    <!-- Las filas se agregarán dinámicamente aquí -->
                </tbody>
            </table>
        </center>

        <!-- Botón para eliminar todos los datos locales -->
        <center>
            <button onclick="eliminarDatosLocales()">Eliminar datos</button>
        </center>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>
        <script>

            const htmlDanger = `<button class="btn btn-danger" onclick="eliminarFila(this)">
                           <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
  <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"/>
</svg>
                            </button>`;

            function saveTableData() {
                const tableData = [];
                const rows = document.getElementById("tabla").rows;
                for (let i = 1; i < rows.length; i++) {  // Iniciar en 1 para omitir el encabezado
                    const row = rows[i];
                    const data = {
                        elemento: row.cells[0].textContent,
                        descripcion: row.cells[1].textContent
                    };
                    tableData.push(data);
                }
                localStorage.setItem("tableData", JSON.stringify(tableData));
            }

            function loadTableData() {
                const savedData = localStorage.getItem("tableData");
                if (savedData) {
                    const tableData = JSON.parse(savedData);
                    const tableBody = document.getElementById("tabla").querySelector('tbody');

                    // Limpiar la tabla antes de agregar las filas
                    tableBody.innerHTML = '';

                    // Agregar las filas de los datos guardados
                    tableData.forEach(data => {
                        const newRow = tableBody.insertRow();
                        const cell1 = newRow.insertCell();
                        const cell2 = newRow.insertCell();
                        const cell3 = newRow.insertCell();
                        cell1.textContent = data.elemento;
                        cell2.textContent = data.descripcion;
                        cell3.innerHTML = htmlDanger
                    });
                }
            }

            function agregarFila() {
                const nombre = document.getElementById("captura").value;
                const nombreSinEspacios = nombre.trim();

                if (nombreSinEspacios === "") {
                    alert("Por favor, ingresa un valor valido.");
                    return;
                }

                const table = document.getElementById("tabla");
                const newRow = table.insertRow(-1);
                const noCell = newRow.insertCell(0);
                const nombreCell = newRow.insertCell(1);
                const accionCell = newRow.insertCell(2);

                noCell.textContent = table.rows.length - 1; // Restar 2 para evitar contar el encabezado
                nombreCell.textContent = nombre;
                accionCell.innerHTML = htmlDanger;

                saveTableData();
                document.getElementById("captura").value = ""; // Limpiar el input
            }

            function eliminarFila(button) {
                button.parentNode.parentNode.remove();
                saveTableData();
            }

            function eliminarDatosLocales() {
                if (window.confirm('¿Estás seguro de que deseas eliminar todos los datos locales de este sitio?')) {
                    localStorage.clear();
                    alert('Datos eliminados correctamente');
                    location.reload(); // Recargar la página para reflejar los cambios
                }
            }

            // Cargar los datos guardados al iniciar la página
            window.onload = loadTableData;
        </script>
        
    </div>
</body>

</html>